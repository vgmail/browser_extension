var SELECTOR_GROUP_SIZE=20,elemhideElt=null;function setElemhideCSSRules(e){if(elemhideElt&&elemhideElt.parentNode&&elemhideElt.parentNode.removeChild(elemhideElt),e){(elemhideElt=document.createElement("style")).setAttribute("type","text/css"),elemhideElt.setAttribute("abt","234"),(document.head||document.documentElement).appendChild(elemhideElt);var t=elemhideElt;!function n(){if(t.sheet)for(var i=0,l=0;i<e.length;i+=SELECTOR_GROUP_SIZE,l++){var o=e.slice(i,i+SELECTOR_GROUP_SIZE).join(", ");t.sheet.insertRule(o+" { display: none !important; }",l)}else window.setTimeout(n,0)}()}}var typeMap={img:"IMAGE",input:"IMAGE",audio:"MEDIA",video:"MEDIA",frame:"SUBDOCUMENT",iframe:"SUBDOCUMENT"};function checkCollapse(e){var t=e.target,n=t.localName,i="iframe"==n||"frame"==n?"load":"error";if(n in typeMap&&e.type==i){var l=t.src;if(!l)return;var o=typeMap[n];chrome.runtime.sendMessage({reqtype:"should-collapse",url:l,documentUrl:document.URL,type:o},(function(e){0===Object.keys(e).length&&e.constructor===Object&&(e=!1),e&&t.parentNode&&("frame"==n?t.style.setProperty("visibility","hidden","!important"):t.parentNode.removeChild(t))}))}}function init(){document.documentElement instanceof HTMLElement&&(document.addEventListener("error",checkCollapse,!0),document.addEventListener("load",checkCollapse,!0),chrome.runtime.sendMessage({reqtype:"get-settings",selectors:!0,frameUrl:window.location.href},(function(e){setElemhideCSSRules(e.selectors)})))}document.documentElement?init():window.setTimeout(init,0);