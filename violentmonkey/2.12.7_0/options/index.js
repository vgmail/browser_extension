(t=>{function e(e){for(var n,i,r=e[0],l=e[1],c=e[2],u=0,p=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(d&&d(e);p.length;)p.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],n=!0,r=1;r<s.length;r++){var l=s[r];0!==a[l]&&(n=!1)}n&&(o.splice(e--,1),t=i(i.s=s[0]))}return t}var n={},a={7:0},o=[];function i(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=n,i.d=(t,e,s)=>{i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=(t,e)=>{if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,(e=>t[e]).bind(null,n));return s},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,"a",e),e},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.p="";var r=window.webpackJsonp=window.webpackJsonp||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([131,1,2,0]),s()})({116:(t,e,s)=>{"use strict";var n=s(26);s.n(n).a},117:(t,e,s)=>{"use strict";var n=s(27);s.n(n).a},118:(t,e,s)=>{"use strict";var n=s(28);s.n(n).a},119:(t,e,s)=>{"use strict";var n=s(29);s.n(n).a},120:(t,e,s)=>{"use strict";var n=s(30);s.n(n).a},121:(t,e,s)=>{"use strict";var n=s(31);s.n(n).a},122:(t,e,s)=>{"use strict";var n=s(32);s.n(n).a},123:(t,e,s)=>{"use strict";var n=s(33);s.n(n).a},124:(t,e,s)=>{"use strict";var n=s(34);s.n(n).a},125:(t,e,s)=>{"use strict";var n=s(35);s.n(n).a},126:(t,e,s)=>{"use strict";var n=s(36);s.n(n).a},127:(t,e,s)=>{"use strict";var n=s(37);s.n(n).a},131:function(t,e,s){"use strict";s.r(e);var n=s(15),a=s(0),o=s(1),i=s(21),r=s(12),l=Object(r.j)(async()=>(await("/public/lib/zip.js/zip.js",new Promise((t,e)=>{const s=document.createElement("script");s.src="/public/lib/zip.js/zip.js",s.onload=()=>t(),s.onerror=()=>e(),document.body.append(s)})),window.zip)),c=(s(45),s(5)),d=s.n(c),u=s(41),p=s.n(u),m=s(13);const h=[];window.addEventListener("keydown",t=>{27===t.keyCode&&h.length&&(t.stopImmediatePropagation(),h.pop()())},!0);var v={props:["message"],created(){h.push(this.dismiss)},mounted(){const t=this.$el.querySelector("input");t&&setTimeout(()=>{t.focus()})},beforeDestroy(){const t=h.indexOf(this.dismiss);t>=0&&h.splice(t,1)},methods:{onButtonClick(t){const{onClick:e}=t;e&&!1!==e(this.message.input)&&this.dismiss()},onBackdropClick(){const{onBackdropClick:t}=this.message;t&&!1!==t()&&this.dismiss()},dismiss(){this.$emit("dismiss")}}},g=(s(74),s(3)),f=Object(g.a)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"message modal-content"},[t.message.text?s("div",{staticClass:"mb-1",domProps:{textContent:t._s(t.message.text)}}):t._e(),t.message.buttons?s("form",{on:{submit:t=>{t.preventDefault()}}},[!1!==t.message.input?s("input",{directives:[{name:"model",rawName:"v-model",value:t.message.input,expression:"message.input"}],staticClass:"mb-1",attrs:{type:"text"},domProps:{value:t.message.input},on:{input:e=>{e.target.composing||t.$set(t.message,"input",e.target.value)}}}):t._e(),s("div",t._l(t.message.buttons,(e,n)=>s("button",{key:n,staticClass:"mr-1",attrs:{type:e.type||"button"},domProps:{textContent:t._s(e.text)},on:{click:s=>t.onButtonClick(e)}})),0)]):t._e()])}),[],!1,null,null,null).exports;const b={route:m.b};function C(t){const e=p.a.show(s=>s(f,{props:{message:t},on:{dismiss(){e.close()}}}),{transition:"in-out"});t.buttons?document.querySelector(".vl-modal button").focus():setTimeout(()=>{e.close()},2e3)}function x(t,{ok:e,cancel:s,input:n=!1}={}){return new Promise((o,i)=>{C({input:n,text:t,buttons:[d()({text:Object(a.n)("buttonOK"),onClick:o},e),d()({text:Object(a.n)("buttonCancel"),onClick:i},s)],onBackdropClick:i})})}var y=s(11);function w(){const t=!m.b.pathname||"scripts"===m.b.pathname;document[`${t?"add":"remove"}EventListener`]("keydown",_)}function _(t){if(t.altKey||t.shiftKey||t.metaKey)return;const e=document.querySelector(".filter-search input"),s=document.activeElement;if(s!==e&&(null==s?void 0:null==s.matches?void 0:s.matches("button, input, select, textarea")))return;if(1===t.key.length&&!t.ctrlKey||"KeyF"===t.code&&t.ctrlKey)return e.focus(),void(t.ctrlKey&&t.preventDefault());if(t.ctrlKey)return;let n=document.querySelector(".script.focused");switch(t.key){case"Enter":n&&(t.preventDefault(),n.dispatchEvent(new Event("keydownEnter")));break;case"ArrowUp":case"ArrowDown":{t.preventDefault();const e="ArrowUp"===t.key?-1:1,s=document.querySelectorAll('.script:not([style*="display"])'),a=s.length;if(!a)return;if(!n)return void s[e>0?0:a-1].classList.add("focused");n.classList.remove("focused"),n=s[([...s].indexOf(n)+e+a)%a],n.classList.add("focused");const o=n.getBoundingClientRect(),i=n.parentElement.getBoundingClientRect();(o.top>i.bottom||o.bottom<i.top)&&n.scrollIntoView({behavior:"smooth"});break}}}w();var k=s(42),S=s.n(k),P=s(17),O=s.n(P),j=s(2),$=s(14),U=s(18),R={props:["i18nKey"],computed:{parts(){return Object(a.n)(this.i18nKey,["\x02"]).split("\x02")}}},E=Object(g.a)(R,(function(){var t=this.$createElement;return(this._self._c||t)("span",[this._v(" "+this._s(this.parts[0])+" "),this._t("default"),this._v(" "+this._s(this.parts[1])+" ")],2)}),[],!1,null,null,null).exports,L=s(6),A=s(10);const N="ontouchstart"in document,M=N?{start:"touchstart",move:"touchmove",end:"touchend"}:{start:"dragstart",move:"mousemove",end:"mouseup"},I=N&&Object.assign(document.createElement("div"),{className:"dragging-noscroll"}),D=["scroll","mouseenter","mouseleave"],{addEventListener:T,removeEventListener:B}=EventTarget.prototype;let V,z,K,F,H,G,J,q,W,Y,X,Z,Q,tt,et,st,nt;function at(t){var e;Y=this,G=t,J=setTimeout(ot,500,"timer"),(e=document,T).call(e,M.move,ot),(e=document,T).call(e,M.end,it)}function ot(t){var e;it(),"timer"===t&&((e=Y,rt).call(e,G),A.a.isFirefox&&dt()&&(X.scrollTop+=1,X.scrollTop-=1))}function it(){var t;clearTimeout(J),(t=document,B).call(t,M.move,ot),(t=document,B).call(t,M.end,it)}function rt(t){var e,s;Y=this,t.cancelable&&t.preventDefault();const{clientX:n,clientY:a}=(null==(e=t.touches)?void 0:e[0])||t,o=Y.getBoundingClientRect(),i=X.getBoundingClientRect();V=Y.cloneNode(!0),z=[...X.children],F=z.indexOf(Y),H=F,z.splice(F,1),K=o.height,q=n-o.left,W=a-o.top,Z=i.top+50,Q=i.bottom-50,nt={},Y.classList.add("dragging-placeholder"),V.classList.add("dragging"),V.style.transform=`translate(${o.left}px, ${o.top}px)`,V.style.width=`${o.width}px`,X.appendChild(V),N&&X.insertAdjacentElement("afterBegin",I),(s=document,T).call(s,M.move,lt),(s=document,T).call(s,M.end,ct)}function lt(t){var e;const{clientX:s,clientY:n,target:a}=(null==(e=t.touches)?void 0:e[0])||t;let o;const i=N?((t,e)=>{var s;const n=`${t}:${e}`;return nt[n]||(nt[n]=null==(s=document.elementFromPoint(t,e))?void 0:s.closest(".script"))})(s,n):null==a.closest?void 0:a.closest(".script");if(i&&i!==Y){const t=i.getBoundingClientRect(),e=n>t.top+t.height/2;o=Y!==i[`${e?"next":"previous"}ElementSibling`],o&&(i.insertAdjacentElement(e?"afterEnd":"beforeBegin",Y),(t=>{const e=H<t?K:-K,s=z.slice(...H<t?[H,t]:[t,H]);s.forEach(t=>{t.style.transition="none",t.style.transform=`translateY(${e}px)`}),setTimeout(()=>s.forEach(t=>t.removeAttribute("style"))),H=t})(z.indexOf(i)+e))}V.style.transform=`translate(${s-q}px, ${n-W}px)`,((t=>{const e=dt()&&Math.min(1,Math.max(0,t-Q,Z-t)/50);return!e&&tt&&pt(),e&&!tt&&(tt=setInterval(ut,16),D.forEach(t=>{var e;return(e=window,T).call(e,t,mt,!0)})),et=e&&(t>Q?1:-1)*(1+20*e|0),st=performance.now(),!!e})(n)||o)&&(nt={})}function ct(){var t;(t=document,B).call(t,M.move,lt),(t=document,B).call(t,M.end,ct),pt(),V.remove(),N&&I.remove(),Y.classList.remove("dragging-placeholder"),Y.dispatchEvent(new Event("VM-drop-event-relay"))}function dt(){return X.scrollHeight>X.clientHeight}function ut(){const t=performance.now(),e=et*(t-st)/16;X.scrollTop+=e,st=t}function pt(){D.forEach(t=>{var e;return(e=window,B).call(e,t,mt,!0)}),tt&&clearInterval(tt),tt=0}function mt(t){t.stopPropagation()}const ht={};var vt={props:["script","draggable","visible"],components:{Icon:y.a,Tooltip:O.a},data(){return{safeIcon:"/public/images/icon48.png",canRender:this.visible}},computed:{canUpdate(){const{script:t}=this;return t.config.shouldUpdate&&(t.custom.updateURL||t.meta.updateURL||t.custom.downloadURL||t.meta.downloadURL||t.custom.lastInstallURL)},homepageURL(){const{script:t}=this;return t.custom.homepageURL||t.meta.homepageURL||t.meta.homepage},author(){const t=this.script.meta.author;if(!t)return;const e=t.match(/^(.*?)\s<(\S*?@\S*?)>$/);return{email:e&&e[2],name:e?e[1]:t}},labelEnable(){return this.script.config.enabled?this.i18n("buttonDisable"):this.i18n("buttonEnable")},description(){return this.script.custom.description||Object(a.k)(this.script.meta,"description")},updatedAt(){const{props:t,config:e}=this.script,s={};let n;if(e.removed?({lastModified:n}=t):n=t.lastUpdated||t.lastModified,n){const t=new Date(n);s.show=Object(a.h)(Date.now()-n),e.removed?s.title=this.i18n("labelRemovedAt",t.toLocaleString()):s.title=this.i18n("labelLastUpdatedAt",t.toLocaleString())}return s}},watch:{visible(t){t&&(this.canRender=!0)}},mounted(){const{icon:t}=this.script.meta;t&&t!==this.safeIcon&&(t=>{if(!t)return Promise.reject();let e=ht[t];if(!e){const s=b.cache[t];e=s?Promise.resolve(s):new Promise((e,s)=>{const n=new Image;n.onload=()=>e(t),n.onerror=()=>s(t),n.src=t}),ht[t]=e}return e})((Object(o.f)(this.script,"custom.pathMap")||{})[t]||t).then(t=>{this.safeIcon=t},()=>{this.safeIcon="/public/images/icon48.png"}),((t,{onDrop:e})=>{X||(X=t.parentElement,N&&!matchMedia("(pointer: coarse)").matches&&X.classList.add("touch")),T.call(t,M.start,N?at:rt),T.call(t,"VM-drop-event-relay",()=>e(F,H))})(this.$el,{onDrop:(t,e)=>this.$emit("move",{from:t,to:e})})},methods:{onEdit(){this.$emit("edit",this.script.props.id)},markRemoved(t){Object(a.w)("MarkRemoved",{id:this.script.props.id,removed:t})},onRemove(){const t=this.$el.getBoundingClientRect();this.markRemoved(1),this.$emit("remove",this.script.props.id,t)},onRestore(){this.markRemoved(0)},onEnable(){Object(a.w)("UpdateScriptInfo",{id:this.script.props.id,config:{enabled:this.script.config.enabled?0:1}})},onUpdate(){Object(a.w)("CheckUpdate",this.script.props.id)}}},gt=(s(98),Object(g.a)(vt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"script",class:{disabled:!t.script.config.enabled,removed:t.script.config.removed,error:t.script.error},attrs:{draggable:t.draggable},on:{keydownEnter:t.onEdit}},[s("img",{staticClass:"script-icon hidden-xs",attrs:{src:t.safeIcon}}),s("div",{staticClass:"script-info flex"},[s("div",{staticClass:"script-name ellipsis flex-auto",domProps:{textContent:t._s(t.script.$cache.name)}}),t.canRender?[t.author?s("tooltip",{staticClass:"script-author ml-1 hidden-sm",attrs:{content:t.i18n("labelAuthor")+t.script.meta.author,align:"end"}},[s("icon",{attrs:{name:"author"}}),t.author.email?s("a",{staticClass:"ellipsis ml-1",attrs:{href:"mailto:"+t.author.email},domProps:{textContent:t._s(t.author.name)}}):s("span",{staticClass:"ellipsis ml-1",domProps:{textContent:t._s(t.author.name)}})],1):t._e(),s("tooltip",{staticClass:"ml-1 hidden-sm",attrs:{content:t.updatedAt.title,align:"end"}},[s("span",{domProps:{textContent:t._s(t.script.meta.version?"v"+t.script.meta.version:"")}}),s("span",{staticClass:"ml-1",domProps:{textContent:t._s(t.updatedAt.show)}})]),t.script.config.removed?s("div",{staticClass:"ml-1"},[s("tooltip",{attrs:{content:t.i18n("buttonRestore"),placement:"left"}},[s("span",{staticClass:"btn-ghost",on:{click:t.onRestore}},[s("icon",{attrs:{name:"undo"}})],1)])],1):t._e()]:t._e()],2),t.canRender?[s("div",{staticClass:"script-buttons flex"},[s("div",{staticClass:"flex-auto flex flex-wrap"},[s("tooltip",{attrs:{content:t.i18n("buttonEdit"),align:"start"}},[s("span",{staticClass:"btn-ghost",on:{click:t.onEdit}},[s("icon",{attrs:{name:"code"}})],1)]),s("tooltip",{attrs:{content:t.labelEnable,align:"start"}},[s("span",{staticClass:"btn-ghost",on:{click:t.onEnable}},[s("icon",{attrs:{name:"toggle-"+(t.script.config.enabled?"on":"off")}})],1)]),s("tooltip",{attrs:{disabled:!t.canUpdate||t.script.checking,content:t.i18n("buttonUpdate"),align:"start"}},[s("span",{staticClass:"btn-ghost",on:{click:t.onUpdate}},[s("icon",{attrs:{name:"refresh"}})],1)]),s("span",{staticClass:"sep"}),s("tooltip",{attrs:{disabled:!t.homepageURL,content:t.i18n("buttonHome"),align:"start"}},[s("a",{staticClass:"btn-ghost",attrs:{target:"_blank",rel:"noopener noreferrer",href:t.homepageURL}},[s("icon",{attrs:{name:"home"}})],1)]),s("tooltip",{attrs:{disabled:!t.description,content:t.description,align:"start"}},[s("span",{staticClass:"btn-ghost"},[s("icon",{attrs:{name:"info"}})],1)]),s("tooltip",{attrs:{disabled:!t.script.meta.supportURL,content:t.i18n("buttonSupport"),align:"start"}},[s("a",{staticClass:"btn-ghost",attrs:{target:"_blank",rel:"noopener noreferrer",href:t.script.meta.supportURL}},[s("icon",{attrs:{name:"question"}})],1)]),s("div",{staticClass:"script-message",attrs:{title:t.script.error},domProps:{textContent:t._s(t.script.message)}})],1),s("tooltip",{attrs:{content:t.i18n("buttonRemove"),align:"end"}},[s("span",{staticClass:"btn-ghost",on:{click:t.onRemove}},[s("icon",{attrs:{name:"trash"}})],1)])],1)]:t._e()],2)}),[],!1,null,null,null).exports),ft=s(43),bt={props:["value","settings"],components:{Tooltip:O.a},computed:{custom(){return this.settings.custom||{}},config(){return this.settings.config||{}},placeholders(){const{value:t}=this;return{name:Object(o.f)(t,"meta.name"),homepageURL:Object(o.f)(t,"meta.homepageURL"),updateURL:Object(o.f)(t,"meta.updateURL")||Object(a.n)("hintUseDownloadURL"),downloadURL:Object(o.f)(t,"meta.downloadURL")||Object(o.f)(t,"custom.lastInstallURL")}}}},Ct=(s(116),Object(g.a)(bt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-settings"},[s("h4",{domProps:{textContent:t._s(t.i18n("editLabelSettings"))}}),s("div",{staticClass:"form-group"},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.shouldUpdate,expression:"config.shouldUpdate"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.config.shouldUpdate)?t._i(t.config.shouldUpdate,null)>-1:t.config.shouldUpdate},on:{change:e=>{var s=t.config.shouldUpdate,n=e.target,a=!!n.checked;if(Array.isArray(s)){var o=t._i(s,null);n.checked?o<0&&t.$set(t.config,"shouldUpdate",s.concat([null])):o>-1&&t.$set(t.config,"shouldUpdate",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.config,"shouldUpdate",a)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelAllowUpdate"))}})]),s("span",{domProps:{textContent:t._s(t.i18n("labelNotifyThisUpdated"))}}),t._l([[t.i18n("genericOn"),"1"],[t.i18n("genericOff"),"0"],[t.i18n("genericUseGlobal"),""]],e=>{var n=e[0],a=e[1];return s("label",{key:a,staticClass:"ml-1"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.config.notifyUpdates,expression:"config.notifyUpdates"}],attrs:{type:"radio"},domProps:{value:a,checked:t._q(t.config.notifyUpdates,a)},on:{change:e=>t.$set(t.config,"notifyUpdates",a)}}),t._v(" "),s("span",{domProps:{textContent:t._s(n)}})])})],2),s("h4",{domProps:{textContent:t._s(t.i18n("editLabelMeta"))}}),s("div",{staticClass:"form-group flex"},[s("label",{staticClass:"label",domProps:{textContent:t._s(t.i18n("labelName"))}}),s("tooltip",{attrs:{content:"@name",placement:"right"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.name,expression:"custom.name"}],attrs:{type:"text",placeholder:t.placeholders.name},domProps:{value:t.custom.name},on:{input:e=>{e.target.composing||t.$set(t.custom,"name",e.target.value)}}})])],1),s("div",{staticClass:"form-group flex"},[s("label",{staticClass:"label",domProps:{textContent:t._s(t.i18n("labelRunAt"))}}),s("tooltip",{attrs:{content:"@run-at",placement:"right"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.custom.runAt,expression:"custom.runAt"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.custom,"runAt",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""},domProps:{textContent:t._s(t.i18n("labelRunAtDefault"))}}),s("option",{attrs:{value:"document-start"}},[t._v("document-start")]),s("option",{attrs:{value:"document-end"}},[t._v("document-end")]),s("option",{attrs:{value:"document-idle"}},[t._v("document-idle")])])])],1),s("div",{staticClass:"form-group flex"},[s("label",{staticClass:"label",domProps:{textContent:t._s(t.i18n("labelHomepageURL"))}}),s("tooltip",{attrs:{content:"@homepageURL",placement:"right"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.homepageURL,expression:"custom.homepageURL"}],attrs:{type:"text",placeholder:t.placeholders.homepageURL},domProps:{value:t.custom.homepageURL},on:{input:e=>{e.target.composing||t.$set(t.custom,"homepageURL",e.target.value)}}})])],1),s("div",{staticClass:"form-group flex"},[s("label",{staticClass:"label",domProps:{textContent:t._s(t.i18n("labelUpdateURL"))}}),s("tooltip",{attrs:{content:"@updateURL",placement:"right"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.updateURL,expression:"custom.updateURL"}],attrs:{type:"text",placeholder:t.placeholders.updateURL},domProps:{value:t.custom.updateURL},on:{input:e=>{e.target.composing||t.$set(t.custom,"updateURL",e.target.value)}}})])],1),s("div",{staticClass:"form-group flex"},[s("label",{staticClass:"label",domProps:{textContent:t._s(t.i18n("labelDownloadURL"))}}),s("tooltip",{attrs:{content:"@downloadURL",placement:"right"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.downloadURL,expression:"custom.downloadURL"}],attrs:{type:"text",placeholder:t.placeholders.downloadURL},domProps:{value:t.custom.downloadURL},on:{input:e=>{e.target.composing||t.$set(t.custom,"downloadURL",e.target.value)}}})])],1),s("tooltip",{staticClass:"form-group",attrs:{content:"@include",placement:"right"}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("labelInclude"))}}),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.origInclude,expression:"custom.origInclude"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.custom.origInclude)?t._i(t.custom.origInclude,null)>-1:t.custom.origInclude},on:{change:e=>{var s=t.custom.origInclude,n=e.target,a=!!n.checked;if(Array.isArray(s)){var o=t._i(s,null);n.checked?o<0&&t.$set(t.custom,"origInclude",s.concat([null])):o>-1&&t.$set(t.custom,"origInclude",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.custom,"origInclude",a)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelKeepOriginal"))}})])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom.include,expression:"custom.include"}],domProps:{value:t.custom.include},on:{input:e=>{e.target.composing||t.$set(t.custom,"include",e.target.value)}}})]),s("tooltip",{staticClass:"form-group",attrs:{content:"@match",placement:"right"}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("labelMatch"))}}),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.origMatch,expression:"custom.origMatch"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.custom.origMatch)?t._i(t.custom.origMatch,null)>-1:t.custom.origMatch},on:{change:e=>{var s=t.custom.origMatch,n=e.target,a=!!n.checked;if(Array.isArray(s)){var o=t._i(s,null);n.checked?o<0&&t.$set(t.custom,"origMatch",s.concat([null])):o>-1&&t.$set(t.custom,"origMatch",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.custom,"origMatch",a)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelKeepOriginal"))}})])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom.match,expression:"custom.match"}],domProps:{value:t.custom.match},on:{input:e=>{e.target.composing||t.$set(t.custom,"match",e.target.value)}}})]),s("tooltip",{staticClass:"form-group",attrs:{content:"@exclude",placement:"right"}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("labelExclude"))}}),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.origExclude,expression:"custom.origExclude"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.custom.origExclude)?t._i(t.custom.origExclude,null)>-1:t.custom.origExclude},on:{change:e=>{var s=t.custom.origExclude,n=e.target,a=!!n.checked;if(Array.isArray(s)){var o=t._i(s,null);n.checked?o<0&&t.$set(t.custom,"origExclude",s.concat([null])):o>-1&&t.$set(t.custom,"origExclude",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.custom,"origExclude",a)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelKeepOriginal"))}})])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom.exclude,expression:"custom.exclude"}],domProps:{value:t.custom.exclude},on:{input:e=>{e.target.composing||t.$set(t.custom,"exclude",e.target.value)}}})]),s("tooltip",{staticClass:"form-group",attrs:{content:"@exclude-match",placement:"right"}},[s("div",{staticClass:"flex"},[s("span",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("labelExcludeMatch"))}}),s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.custom.origExcludeMatch,expression:"custom.origExcludeMatch"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.custom.origExcludeMatch)?t._i(t.custom.origExcludeMatch,null)>-1:t.custom.origExcludeMatch},on:{change:e=>{var s=t.custom.origExcludeMatch,n=e.target,a=!!n.checked;if(Array.isArray(s)){var o=t._i(s,null);n.checked?o<0&&t.$set(t.custom,"origExcludeMatch",s.concat([null])):o>-1&&t.$set(t.custom,"origExcludeMatch",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.custom,"origExcludeMatch",a)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelKeepOriginal"))}})])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.custom.excludeMatch,expression:"custom.excludeMatch"}],domProps:{value:t.custom.excludeMatch},on:{input:e=>{e.target.composing||t.$set(t.custom,"excludeMatch",e.target.value)}}})])],1)}),[],!1,null,null,null).exports),xt={props:["show","script"],components:{Icon:y.a},data:()=>({current:null,keys:null,values:null}),computed:{totalPages(){return this.keys?Math.floor(this.keys.length/25)+1:0},currentPage(){const t=Math.max(1,Math.min(this.page,this.totalPages)),e=25*(t-1);return{page:t,data:this.keys?this.keys.slice(e,e+25):null}},hasPrevious(){return this.currentPage.page>1},hasNext(){return this.currentPage.page<this.totalPages}},watch:{show(t){t&&!this.keys&&this.refresh()},current(t){t&&this.$nextTick(()=>{const e=this.$refs[t.isNew?"key":"value"];e.setSelectionRange(0,0),e.focus()})}},methods:{getValue(t,e){let s=this.values[t];const n=s[0];return s=s.slice(1),"s"===n&&(s=JSON.stringify(s)),e&&s.length>1024&&(s=s.slice(0,1024)),s},refresh(){Object(a.w)("GetValueStore",this.script.props.id).then(t=>{this.values=t,this.keys=Object.keys(t).sort(),this.page=1})},updateValue({key:t,value:e,isNew:s}){const n=e?`o${e}`:"",{id:o}=this.script.props;return Object(a.w)("UpdateValue",{id:o,key:t,value:n}).then(()=>{if(e)this.$set(this.values,t,n),s&&this.keys.push(t);else{const e=this.keys.indexOf(t);e>=0&&this.keys.splice(e,1),this.$delete(this.values,t)}})},onNew(){this.current={isNew:!0,key:"",value:""}},onRemove(t){this.updateValue({key:t}).then(()=>{this.current&&this.current.key===t&&(this.current=null)})},onEdit(t){this.current={isNew:!1,key:t,value:this.getValue(t)}},onSave(){this.updateValue(this.current).then(()=>{this.current=null})},onCancel(){this.current=null}},created(){let t;const e=()=>{this.show&&(this.refresh(),t&&t())};t=this.$watch("show",e),e()}},yt=(s(117),Object(g.a)(xt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"edit-values"},[s("div",{staticClass:"mb-1"},[s("button",{on:{click:t.onNew}},[t._v("+")]),t.totalPages>1?s("div",{staticClass:"inline-block ml-2"},[s("button",{attrs:{disabled:!t.hasPrevious},on:{click:e=>{t.page=t.currentPage.page-1}}},[t._v("\u2190")]),s("span",{staticClass:"mx-1",domProps:{textContent:t._s(t.page)}}),s("button",{attrs:{disabled:!t.hasNext},on:{click:e=>{t.page=t.currentPage.page+1}}},[t._v("\u2192")])]):t._e()]),t.keys?s("div",{staticClass:"edit-values-table"},[t.keys.length?t._e():s("div",{staticClass:"edit-values-empty"},[s("div",{domProps:{textContent:t._s(t.i18n("noValues"))}})]),t._l(t.currentPage.data,e=>s("div",{key:e,staticClass:"edit-values-row flex",on:{click:s=>t.onEdit(e)}},[s("div",{staticClass:"ellipsis"},[s("span",{domProps:{textContent:t._s(e)}}),s("div",{staticClass:"edit-values-btn"},[s("span",{on:{click:s=>(s.stopPropagation(),t.onRemove(e))}},[s("icon",{attrs:{name:"trash"}})],1)])]),s("div",{staticClass:"ellipsis flex-auto",domProps:{textContent:t._s(t.getValue(e,!0))}})]))],2):t._e(),t.current?s("div",{staticClass:"edit-values-panel flex flex-col"},[s("div",{staticClass:"flex mb-1"},[s("h4",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("labelEditValue"))}}),s("div",[s("button",{domProps:{textContent:t._s(t.i18n("editValueSave"))},on:{click:t.onSave}}),s("button",{domProps:{textContent:t._s(t.i18n("editValueCancel"))},on:{click:t.onCancel}})])]),s("label",{staticClass:"mb-1",domProps:{textContent:t._s(t.i18n("valueLabelKey"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.current.key,expression:"current.key"}],ref:"key",attrs:{type:"text",readOnly:!t.current.isNew,spellcheck:"false"},domProps:{value:t.current.key},on:{keydown:e=>!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),t.onCancel(e)),input:e=>{e.target.composing||t.$set(t.current,"key",e.target.value)}}}),s("label",{staticClass:"mt-1 mb-1",domProps:{textContent:t._s(t.i18n("valueLabelValue"))}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.current.value,expression:"current.value"}],ref:"value",staticClass:"flex-auto",attrs:{spellcheck:"false"},domProps:{value:t.current.value},on:{keydown:e=>!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),t.onCancel(e)),input:e=>{e.target.composing||t.$set(t.current,"value",e.target.value)}}})]):t._e()])}),[],!1,null,null,null).exports),wt=s(9),_t=s.n(wt);function kt(t,e,s){return t[s]<e[s]?-1:t[s]>e[s]}var St={props:["target"],data:()=>({hotkeys:null}),mounted(){const t=this.target.cm.options;this.hotkeys=Object.entries(function t(e,...s){return s.forEach(s=>{var n;"string"==typeof s&&(s=_t.a.keyMap[s]),(n=s,o.a).call(n,([t,s])=>{!e[t]&&/^[a-z]+$/i.test(s)&&_t.a.commands[s]&&(e[t]=s)}),s.fallthrough&&t(e,s.fallthrough)}),delete e.fallthrough,e}({},t.extraKeys,t.keyMap)).sort((t,e)=>kt(t,e,1)||kt(t,e,0))}},Pt=(s(118),Object(g.a)(St,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-help"},[s("div",[s("h3",{domProps:{innerHTML:t._s(t.i18n("editHelpDocumention"))}}),s("a",{attrs:{href:"https://violentmonkey.github.io/api/",rel:"noopener noreferrer",target:"_blank"}},[t._v("violentmonkey.github.io/api/")])]),s("div",{staticClass:"keyboard"},[s("h3",{domProps:{textContent:t._s(t.i18n("editHelpKeyboard"))}}),s("table",t._l(t.hotkeys,e=>{var n=e[0],a=e[1];return s("tr",{key:n},[s("th",{staticClass:"monospace-font"},[t._v(t._s(n))]),s("td",[t._v(t._s(a))])])}),0)])])}),[],!1,null,null,null).exports);const Ot=["name","runAt","homepageURL","updateURL","downloadURL","origInclude","origExclude","origMatch","origExcludeMatch"],jt=["include","match","exclude","excludeMatch"],$t=t=>(null==t?void 0:t.join("\n"))||"",Ut=t=>t.split("\n").map(t=>t.trim()).filter(Boolean);var Rt={props:["initial"],components:{VmCode:ft.default,VmSettings:Ct,VmValues:yt,VmHelp:Pt},data(){return{nav:"code",canSave:!1,script:null,code:"",settings:{},commands:{save:this.save,close:()=>this.close({fromCM:!0}),showHelp:()=>{this.nav="help"}}}},computed:{scriptName(){const{custom:t,meta:e}=this.script||{},s=t&&t.name||e&&e.name;return b.title=s,s},scriptId(){var t,e;return null==(t=this.script)?void 0:null==(e=t.props)?void 0:e.id}},watch:{code(){this.canSave=!0},settings:{deep:!0,handler(){this.canSave=!0}},nav(){setTimeout(()=>"code"===this.nav&&this.$refs.code.cm.focus())}},created(){this.script=this.initial},async mounted(){var t,e,s;const n=null==(t=this.script)?void 0:null==(e=t.props)?void 0:e.id;if(n)this.code=await Object(a.w)("GetScriptCode",n);else{const{script:t,code:e}=await Object(a.w)("NewScript",m.b.paths[2]);this.script=t,this.code=e}const{custom:i,config:r}=this.script;this.settings={config:{notifyUpdates:`${null!=(s=r.notifyUpdates)?s:""}`,shouldUpdate:r.shouldUpdate},custom:d()({},Object(o.g)(i,Ot),{},Object(o.g)(i,jt,$t),{runAt:i.runAt||""})},this.$nextTick(()=>{this.canSave=!1})},methods:{async save(){const{config:t,custom:e}=this.settings,{notifyUpdates:s}=t;try{var n,i,r;const l=null==(n=this.script)?void 0:null==(i=n.props)?void 0:i.id,c=await Object(a.w)("ParseScript",{id:l,config:d()({},t,{notifyUpdates:s?+s:null}),code:this.code,custom:d()({},Object(o.g)(e,Ot),{},Object(o.g)(e,jt,Ut)),isNew:!l,message:""});this.canSave=!1,(null==c?void 0:null==(r=c.where)?void 0:r.id)&&(this.script=c.update)}catch(t){C({text:t})}},async close({fromCM:t}={}){if(t&&"code"!==this.nav)this.nav="code";else try{this.canSave&&await x(Object(a.n)("confirmNotSaved")),this.$emit("close")}catch(t){}},saveClose(){this.save().then(this.close)}},beforeDestroy(){b.title=null}},Et=(s(119),Object(g.a)(Rt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit frame flex flex-col fixed-full"},[s("div",{staticClass:"edit-header flex"},[s("nav",[s("div",{staticClass:"edit-nav-item",class:{active:"code"===t.nav},domProps:{textContent:t._s(t.i18n("editNavCode"))},on:{click:e=>{t.nav="code"}}}),s("div",{staticClass:"edit-nav-item",class:{active:"settings"===t.nav},domProps:{textContent:t._s(t.i18n("editNavSettings"))},on:{click:e=>{t.nav="settings"}}}),t.scriptId?s("div",{staticClass:"edit-nav-item",class:{active:"values"===t.nav},domProps:{textContent:t._s(t.i18n("editNavValues"))},on:{click:e=>{t.nav="values"}}}):t._e(),s("div",{staticClass:"edit-nav-item",class:{active:"help"===t.nav},on:{click:e=>{t.nav="help"}}},[t._v("?")])]),s("div",{staticClass:"edit-name text-center ellipsis flex-1 mr-1",domProps:{textContent:t._s(t.scriptName)}}),s("div",{staticClass:"edit-hint text-right ellipsis mr-1"},[s("a",{attrs:{href:"https://violentmonkey.github.io/posts/how-to-edit-scripts-with-your-favorite-editor/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("editHowToHint"))}})]),s("div",{staticClass:"edit-buttons mr-1"},[s("button",{attrs:{disabled:!t.canSave},domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:t.save}}),s("button",{attrs:{disabled:!t.canSave},domProps:{textContent:t._s(t.i18n("buttonSaveClose"))},on:{click:t.saveClose}}),s("button",{domProps:{textContent:t._s(t.i18n("buttonClose"))},on:{click:t.close}})])]),s("div",{staticClass:"frame-block flex-auto pos-rel"},[s("vm-code",{directives:[{name:"show",rawName:"v-show",value:"code"===t.nav,expression:"nav === 'code'"}],ref:"code",staticClass:"abs-full",attrs:{editing:"code"===t.nav,commands:t.commands},model:{value:t.code,callback:e=>{t.code=e},expression:"code"}}),s("vm-settings",{directives:[{name:"show",rawName:"v-show",value:"settings"===t.nav,expression:"nav === 'settings'"}],staticClass:"abs-full edit-body",attrs:{value:t.script,settings:t.settings}}),s("vm-values",{staticClass:"abs-full edit-body",attrs:{show:"values"===t.nav,script:t.script}}),"help"===t.nav?s("vm-help",{staticClass:"abs-full edit-body",attrs:{target:this.$refs.code}}):t._e()],1)])}),[],!1,null,null,null).exports);const Lt={sort:{exec:{title:Object(a.n)("filterExecutionOrder")},alpha:{title:Object(a.n)("filterAlphabeticalOrder"),compare:({$cache:{lowerName:t}},{$cache:{lowerName:e}})=>t<e?-1:t>e},update:{title:Object(a.n)("filterLastUpdateOrder"),compare:({props:{lastUpdated:t}},{props:{lastUpdated:e}})=>(+e||0)-(+t||0)}}},At={value:null,title:null},Nt={searchScope:null,showEnabledFirst:null,get sort(){return At},set sort(t){const e=Lt.sort[t];e?(At.value=t,At.title=e.title):Nt.sort=Object.keys(Lt.sort)[0]}};o.b.call(Nt,t=>{Object(U.a)(`filters.${t}`,e=>{Nt[t]=e})});let Mt=0;var It={components:{ScriptItem:gt,Edit:Et,Tooltip:O.a,SettingCheck:$.a,LocaleGroup:E,Dropdown:S.a,Icon:y.a},data:()=>({store:b,filterOptions:Lt,filters:Nt,script:null,search:null,searchError:null,modal:null,menuNewActive:!1,showRecycle:!1,sortedScripts:[],removing:null,canRenderScripts:!b.route.paths[1],batchRender:{limit:Mt}}),watch:{search:"scheduleSearch","filters.sort.value":"updateLater","filters.showEnabledFirst":"updateLater",showRecycle:"onUpdate",scripts:"refreshUI","store.route.paths.1":"onHashChange"},computed:{currentSortCompare(){var t;return null==(t=Lt.sort[Nt.sort.value])?void 0:t.compare},message(){if(this.store.loading)return null;const t=this.sortedScripts;return(this.search?t.find(t=>!1!==t.$cache.show):t.length)?null:Object(a.n)("labelNoSearchScripts")},scripts(){return this.store.scripts.filter(t=>!t.config.removed)},trash(){return this.store.scripts.filter(t=>t.config.removed)}},methods:{refreshUI(){this.onUpdate(),this.onHashChange()},onUpdate(){const t=[...this.showRecycle?this.trash:this.scripts];this.search&&this.performSearch(t);const e=this.currentSortCompare;var s;e&&t.sort((s=e,Nt.showEnabledFirst?(t,e)=>e.config.enabled-t.config.enabled||s(t,e):s)),this.sortedScripts=t,this.debouncedRender()},updateLater(){this.debouncedUpdate()},updateAll(){Object(a.w)("CheckUpdateAll")},async installFromURL(){try{var t;let e=await x(Object(a.n)("hintInputURL"),{input:"",ok:{type:"submit"}});e=null==(t=e)?void 0:t.trim(),e&&(e.includes("://")||(e=`https://${e}`),new URL(e)&&await Object(a.w)("ConfirmInstall",{url:e}))}catch(t){t&&C({text:t})}},moveScript(t){t.from!==t.to&&Object(a.w)("Move",{id:this.scripts[t.from].props.id,offset:t.to-t.from}).then(()=>{const{scripts:e}=this,s=Math.min(t.from,t.to),n=Math.max(t.from,t.to),a=[e.slice(0,s),e.slice(s,n+1),e.slice(n+1)];s===t.to?a[1].unshift(a[1].pop()):a[1].push(a[1].shift()),this.store.scripts=[...a.flat(),...this.trash]})},onOrderChange(t){j.a.set("filters.sort",t.target.value)},onScopeChange(t){this.search&&this.scheduleSearch(),j.a.set("filters.searchScope",t.target.value)},onStateChange(t){this.menuNewActive=t},onEditScript(t){const e=["scripts",t].filter(Boolean).join("/");t||e!==Object(m.a)().pathname?Object(m.c)(e):window.history.back()},onHashChange(){const[t,e]=this.store.route.paths;if("_new"===e)this.script={};else{const s=e&&+e||null;this.script=s&&this.scripts.find(t=>t.props.id===s),this.script||(this.canRenderScripts=!0,this.debouncedRender(),e&&Object(m.c)(t,!0))}},toggleRecycle(){this.showRecycle=!this.showRecycle},onRemove(t,e){const{trash:s}=this.$refs;if(!s||this.removing)return;const n=s.getBoundingClientRect();this.removing={id:t,animation:{width:`${n.width}px`,height:`${n.height}px`,top:`${n.top}px`,left:`${n.left}px`,transform:`translate(${e.left-n.left}px,${e.top-n.top}px) scale(${e.width/n.width},${e.height/n.height})`,transition:"transform .3s"}},setTimeout(()=>{this.removing.animation.transform="translate(0,0) scale(1,1)",setTimeout(()=>{this.removing=null},300)})},async renderScripts(){if(!this.canRenderScripts)return;const{length:t}=this.sortedScripts;let e=9;const s={limit:e};this.batchRender=s;const n=performance.now();for(;e<t&&s===this.batchRender;)e+=Mt||1,s.limit=e,await new Promise(t=>this.$nextTick(t)),!Mt&&performance.now()-n>=100&&(Mt=e),Mt&&await Object(a.s)()},performSearch(t){let e;const[,s=this.search.replace(/[.+^*$?|\\()[\]{}]/g,"\\$&"),n="i"]=this.search.match(/^\/(.+?)\/(\w*)$|$/),a=Nt.searchScope,o="name"===a||"all"===a,i="code"===a||"all"===a;try{e=s&&new RegExp(s,n),t.forEach(({$cache:t})=>{t.show=!s||o&&e.test(t.search)||i&&e.test(t.code)}),this.searchError=null}catch(t){this.searchError=t.message}},async scheduleSearch(){var t;const{scripts:e}=this.store;if(null==(null==(t=e[0])?void 0:t.$cache.code)&&["code","all"].includes(Nt.searchScope)){const t=e.map(({props:{id:t}})=>t),s=await L.a.code.getMulti(t);t.forEach((t,n)=>{e[n].$cache.code=s[t]})}this.debouncedUpdate()},async emptyRecycleBin(){try{await x(Object(a.n)("buttonEmptyRecycleBin")),Object(a.w)("CheckRemove",{force:!0}),b.scripts=b.scripts.filter(t=>!t.config.removed)}catch(t){}}},created(){this.debouncedUpdate=Object(a.d)(this.onUpdate,100),this.debouncedRender=Object(a.d)(this.renderScripts)},mounted(){b.loading||this.refreshUI()}},Dt=(s(120),Object(g.a)(It,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-installed flex flex-col"},[t.canRenderScripts?s("div",{staticClass:"flex flex-col flex-auto"},[s("header",{staticClass:"flex"},[t.showRecycle?s("div",{staticClass:"flex-auto",domProps:{textContent:t._s(t.i18n("headerRecycleBin")+(t.trash.length?" ("+t.trash.length+")":""))}}):s("div",{staticClass:"flex-auto"},[s("dropdown",{class:{active:t.menuNewActive},attrs:{closeAfterClick:!0},on:{stateChange:t.onStateChange}},[s("tooltip",{attrs:{slot:"toggle",content:t.i18n("buttonNew"),placement:"bottom",align:"start"},slot:"toggle"},[s("span",{staticClass:"btn-ghost"},[s("icon",{attrs:{name:"plus"}})],1)]),s("div",{staticClass:"dropdown-menu-item",domProps:{textContent:t._s(t.i18n("buttonNew"))},on:{click:e=>(e.preventDefault(),t.onEditScript("_new"))}}),s("a",{staticClass:"dropdown-menu-item",attrs:{href:"https://openuserjs.org/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("installFrom","OpenUserJS"))}}),s("a",{staticClass:"dropdown-menu-item",attrs:{href:"https://greasyfork.org/scripts",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("installFrom","GreasyFork"))}}),s("div",{staticClass:"dropdown-menu-item",domProps:{textContent:t._s(t.i18n("buttonInstallFromURL"))},on:{click:e=>(e.preventDefault(),t.installFromURL(e))}})],1),s("tooltip",{attrs:{content:t.i18n("buttonUpdateAll"),placement:"bottom",align:"start"}},[s("span",{staticClass:"btn-ghost",on:{click:t.updateAll}},[s("icon",{attrs:{name:"refresh"}})],1)])],1),s("tooltip",{attrs:{content:t.i18n("buttonRecycleBin"),placement:"bottom"}},[s("span",{ref:"trash",staticClass:"btn-ghost trash-button",class:{active:t.showRecycle,filled:t.trash.length},on:{click:t.toggleRecycle}},[s("icon",{attrs:{name:"trash"}}),t.trash.length?s("b",{domProps:{textContent:t._s(t.trash.length)}}):t._e()],1)]),s("dropdown",{staticClass:"filter-sort",attrs:{align:"right"}},[s("tooltip",{attrs:{slot:"toggle",content:t.i18n("buttonFilter"),placement:"bottom"},slot:"toggle"},[s("span",{staticClass:"btn-ghost"},[s("icon",{attrs:{name:"filter"}})],1)]),s("div",[s("locale-group",{attrs:{"i18n-key":"labelFilterSort"}},[s("select",{domProps:{value:t.filters.sort.value},on:{change:t.onOrderChange}},t._l(t.filterOptions.sort,(e,n)=>s("option",{key:n,domProps:{value:n,textContent:t._s(e.title)}})),0)])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.currentSortCompare,expression:"currentSortCompare"}]},[s("label",[s("setting-check",{attrs:{name:"filters.showEnabledFirst"}}),s("span",{domProps:{textContent:t._s(t.i18n("optionShowEnabledFirst"))}})],1)])],1),s("form",{staticClass:"filter-search hidden-sm flex",on:{submit:t=>{t.preventDefault()}}},[s("tooltip",{attrs:{placement:"bottom"}},[s("label",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],class:{"has-error":t.searchError},attrs:{type:"search",placeholder:t.i18n("labelSearchScript"),id:"installed-search"},domProps:{value:t.search},on:{input:e=>{e.target.composing||(t.search=e.target.value)}}}),s("icon",{attrs:{name:"search"}})],1),s("pre",{staticClass:"filter-search-tooltip",attrs:{slot:"content"},domProps:{textContent:t._s(t.searchError||t.i18n("titleSearchHint"))},slot:"content"},[t._v("          ")])]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filters.searchScope,expression:"filters.searchScope"}],on:{change:[e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.filters,"searchScope",e.target.multiple?s:s[0])},t.onScopeChange]}},[s("option",{attrs:{value:"name"},domProps:{textContent:t._s(t.i18n("filterScopeName"))}}),s("option",{attrs:{value:"code"},domProps:{textContent:t._s(t.i18n("filterScopeCode"))}}),s("option",{attrs:{value:"all"},domProps:{textContent:t._s(t.i18n("filterScopeAll"))}})])],1)],1),t.showRecycle?s("div",{staticClass:"trash-hint mx-1 my-1 flex flex-col"},[s("span",{domProps:{textContent:t._s(t.i18n("hintRecycleBin"))}}),t.trash.length?s("a",{attrs:{href:"#"},domProps:{textContent:t._s(t.i18n("buttonEmptyRecycleBin"))},on:{click:e=>(e.preventDefault(),t.emptyRecycleBin(e))}}):t._e()]):t._e(),s("div",{staticClass:"flex-auto pos-rel"},[s("div",{staticClass:"scripts abs-full"},t._l(t.sortedScripts,(e,n)=>s("script-item",{directives:[{name:"show",rawName:"v-show",value:!t.search||!1!==e.$cache.show,expression:"!search || script.$cache.show !== false"}],key:e.props.id,class:{removing:t.removing&&t.removing.id===e.props.id},attrs:{script:e,draggable:"exec"===t.filters.sort.value&&!e.config.removed,visible:n<t.batchRender.limit},on:{edit:t.onEditScript,move:t.moveScript,remove:t.onRemove}})),1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.message,expression:"message"}],staticClass:"backdrop abs-full",class:{mask:t.store.loading}},[s("div",{domProps:{innerHTML:t._s(t.message)}})])])]):t._e(),t.script?s("edit",{attrs:{initial:t.script},on:{close:e=>t.onEditScript()}}):t._e(),t.removing?s("div",{staticClass:"trash-animate",style:t.removing.animation}):t._e()],1)}),[],!1,null,null,null).exports),Tt=s(4);const Bt=[];async function Vt(t){if(!t)return;Bt.length=0;const e=await l(),s=await new Promise((s,n)=>{e.createReader(new e.BlobReader(t),t=>t.getEntries(s),n)}).catch(p)||[];if(Bt.length)return;p("",t.name,"info");const n={},o=s.reduce((t,e)=>{var s;return t+(null==(s=e.filename)?void 0:s.endsWith(".user.js"))},0),i=s.find(t=>{var e;return"violentmonkey"===(null==(e=t.filename)?void 0:e.toLowerCase())}),r=await u(i)||{};function c(t,e){return Promise.all(s.map(async s=>{const{filename:n}=s;if(null==n?void 0:n.endsWith(e)){const a=await u(s);return a&&t(s,a,n.slice(0,-e.length))}}))}function u(t){return t&&new Promise(s=>{t.getData(new e.TextWriter,e=>{s(t.filename.endsWith(".js")?e:((t,e)=>{try{return JSON.parse(t)}catch(t){p(t,e.filename,null)}})(e,t))})})}function p(t,e,s="critical"){Bt.push({text:t,name:e,type:s})}function m(t=""){const e=Object.keys(n).length,s=Object(a.n)("msgImported",[e===o?e:`${e} / ${o}`]);return Bt[0].name=s,Bt[0].text=t,s}function h(t,e){return Object.entries(t||{}).map(e).filter(Boolean)}function v(t){return Object(a.g)(t).filter(t=>"string"==typeof t)}r.scripts||(r.scripts={}),r.values||(r.values={}),await c(async(t,e,s)=>{const{meta:n,settings:a={},options:o}=e;if(!n||!o)return;const i=o.override||{};Bt[0].text="Tampermonkey",r.scripts[s]={config:{enabled:!1!==a.enabled?1:0,shouldUpdate:o.check_for_updates?1:0},custom:{downloadURL:"string"==typeof n.file_url?n.file_url:void 0,noframes:!!i.noframes||null==i.noframes&&void 0,runAt:/^document-(start|end|idle)$/.test(o.run_at)?o.run_at:void 0,exclude:v(i.use_excludes),include:v(i.use_includes),match:v(i.use_matches),origExclude:!1!==i.merge_excludes,origInclude:!1!==i.merge_includes,origMatch:!1!==i.merge_matches},position:+a.position||void 0,props:{lastModified:+n.modified,lastUpdated:+n.modified}}},".options.json"),await c(async(t,e,s)=>{var o,i;const{filename:l}=t,c=r.scripts[s],u=d()({code:e},c&&{custom:c.custom,config:d()({enabled:null!=(o=c.enabled)?o:1,shouldUpdate:null!=(i=c.update)?i:1},c.config),position:c.position,props:{lastModified:c.lastModified||+t.lastModDate,lastUpdated:c.lastUpdated||+t.lastModDate}});try{n[s]=(await Object(a.w)("ParseScript",u)).update.props.uri,m(l)}catch(t){p(t,l,"script")}},".user.js"),await c(async(t,e,s)=>{Bt[0].text="Tampermonkey",r.values[n[s]]=e.data},".storage.json"),j.a.get("importSettings")&&Object(a.w)("SetOptions",h(r.settings,([t,e])=>"sync"!==t&&{key:t,value:e})),Object(a.w)("SetValueStores",h(r.values,([t,e])=>e&&{where:{uri:t},store:e})),Object(a.w)("CheckPosition"),C({text:m()})}var zt={components:{SettingCheck:$.a},data(){return{reports:Bt,vacuuming:!1,labelVacuum:this.i18n("buttonVacuum")}},methods:{pickBackup(){const t=document.createElement("input");t.type="file",t.accept=".zip",t.onchange=()=>{var e;return Vt(null==(e=t.files)?void 0:e[0])},t.click()},async vacuum(){this.vacuuming=!0,this.labelVacuum=this.i18n("buttonVacuuming"),await Object(a.w)("Vacuum"),this.vacuuming=!1,this.labelVacuum=this.i18n("buttonVacuumed")}},mounted(){const t=(t=>{let e;const s=e=>t.classList.toggle("drop-allowed",e),n=()=>s(!1),o=()=>{clearTimeout(e),e=setTimeout(n,250)},i=t=>{clearTimeout(e);const n=t.dataTransfer.types.includes("Files");n&&t.preventDefault(),s(n)},r=async e=>{e.preventDefault(),s(!1);try{const s=e.dataTransfer.files[0];await x(Object(a.n)("buttonImportData")),t.disabled=!0,await Vt(s),t.disabled=!1}catch(t){}};return()=>{var t;const e="#settings"===window.location.hash,s=document[`${e?"add":"remove"}EventListener`];(t=document,s).call(t,"dragend",n),(t=document,s).call(t,"dragleave",o),(t=document,s).call(t,"dragover",i),(t=document,s).call(t,"drop",r)}})(this.$refs.buttonImport);window.addEventListener("hashchange",t),t()}},Kt=(s(121),Object(g.a)(zt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelDataImport"))}}),s("button",{ref:"buttonImport",domProps:{textContent:t._s(t.i18n("buttonImportData"))},on:{click:t.pickBackup}}),s("button",{attrs:{title:t.i18n("hintVacuum"),disabled:t.vacuuming},domProps:{textContent:t._s(t.labelVacuum)},on:{click:t.vacuum}}),s("div",{staticClass:"mt-1"},[s("label",[s("setting-check",{attrs:{name:"importSettings"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelImportSettings"))}})],1)]),s("table",{staticClass:"import-report"},t._l(t.reports,(e,n)=>{var a=e.type,o=e.name,i=e.text;return s("tr",{key:n,attrs:{"data-type":a}},[o?s("td",{domProps:{textContent:t._s(o)}}):t._e(),s("td",{attrs:{colspan:o?null:2},domProps:{textContent:t._s(i)}})])}),0)])}),[],!1,null,null,null).exports);function Ft(t,e,s="0"){let n=`${t}`;for(;n.length<e;)n=s+n;return n}function Ht(){return`scripts_${(()=>{const t=new Date;return`${t.getFullYear()}-${Ft(t.getMonth()+1,2)}-${Ft(t.getDate(),2)}_${Ft(t.getHours(),2)}.${Ft(t.getMinutes(),2)}.${Ft(t.getSeconds(),2)}`})()}.zip`}function Gt(t){if(A.a.isFirefox){const e=new FileReader;e.onload=()=>{b.ffDownload={name:Ht(),url:e.result}},e.readAsDataURL(t)}else!function(t,e,s){const n=URL.createObjectURL(t);((t,e,s)=>{const n=document.createElement("a");n.style.display="none",document.body.appendChild(n),n.href=t,e&&(n.download=e),n.click(),setTimeout(()=>{document.body.removeChild(n),s&&s()},3e3)})(n,e,()=>{URL.revokeObjectURL(n),s&&s()})}(t,Ht())}A.a.isFirefox&&(b.ffDownload={});var Jt={components:{SettingCheck:$.a,Modal:p.a},data:()=>({store:b,exporting:!1}),methods:{exportData(){this.exporting=!0,Promise.resolve((()=>{const t=j.a.get("exportValues");return Object(a.w)("ExportZip",{values:t}).then(e=>{const s={},n={scripts:{},settings:j.a.get()};delete n.settings.sync,t&&(n.values={});const a=(Object(o.f)(e,"items")||[]).map(({script:a,code:o})=>{let i=(t=>t.replace(/[\\/:*?"<>|]/g,"-"))(a.custom.name||a.meta.name||a.props.id);s[i]?(s[i]+=1,i=`${i}_${s[i]}`):s[i]=1;const{lastModified:r,lastUpdated:l}=a.props,c={custom:a.custom,config:a.config,position:a.props.position,lastModified:r,lastUpdated:l};if(t){const t=e.values[a.props.id];t&&(n.values[a.props.uri]=t)}return n.scripts[i]=c,{name:`${i}.user.js`,content:o,lastModDate:new Date(l||r)}});return a.push({name:"violentmonkey",content:JSON.stringify(n)}),a}).then(t=>t.reduce((t,e)=>t.then(t=>((t,e)=>l().then(s=>new Promise(n=>{t.add(e.name,new s.TextReader(e.content),()=>n(t),null,{lastModDate:e.lastModDate})})))(t,e)),l().then(t=>new Promise(e=>{t.createWriter(new t.BlobWriter("application/octet-stream"),t=>{e(t)})})))).then(t=>new Promise(e=>{t.close(t=>{e(t)})}))})()).then(Gt).catch(t=>{console.error(t)}).then(()=>{this.exporting=!1})},getName:t=>t.script.custom.name||Object(a.k)(t.script.meta,"name")}},qt=(s(122),Object(g.a)(Jt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelDataExport"))}}),s("button",{attrs:{disabled:t.exporting},domProps:{textContent:t._s(t.i18n("buttonExportData"))},on:{click:t.exportData}}),s("div",{staticClass:"mt-1"},[s("label",[s("setting-check",{attrs:{name:"exportValues"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelExportScriptData"))}})],1)]),t.store.ffDownload?s("modal",{attrs:{transition:"in-out",visible:!!t.store.ffDownload.url},on:{close:e=>{t.store.ffDownload={}}}},[s("div",{staticClass:"export-modal modal-content"},[s("a",{attrs:{download:t.store.ffDownload.name,href:t.store.ffDownload.url}},[t._v(" Right click and save as"),s("br"),s("strong",[t._v("scripts.zip")])])])]):t._e()],1)}),[],!1,null,null,null).exports);const Wt={current:""};Object(U.a)("sync.current",t=>{Wt.current=t||""});var Yt={components:{SettingCheck:$.a,Icon:y.a},data:()=>({syncConfig:Wt,store:b}),computed:{syncServices(){const t=this.store.sync;return t&&t.length?[{displayName:this.i18n("labelSyncDisabled"),name:"",properties:{}},...t]:null},service(){if(this.syncServices){const t=this.syncConfig.current||"";let e=this.syncServices.find(e=>e.name===t);return e||(console.warn("Invalid current service:",t),e=this.syncServices[0]),e}return null},state(){const{service:t}=this;if(t){const e=["unauthorized","error","authorized"].includes(t.authState)&&["idle","error"].includes(t.syncState),s=e&&"authorized"===t.authState;return{message:this.getMessage(),label:this.getLabel(),canAuthorize:e,canSync:s,authType:t.properties.authType,userConfig:t.userConfig||{}}}return null}},methods:{onSaveUserConfig(){Object(a.w)("SyncSetConfig",this.state.userConfig).catch(a.t)},onSyncChange(t){const{value:e}=t.target;j.a.set("sync.current",e)},onAuthorize(){const{service:t}=this;["authorized"].includes(t.authState)?Object(a.w)("SyncRevoke"):["unauthorized","error"].includes(t.authState)&&Object(a.w)("SyncAuthorize")},onSync(){Object(a.w)("SyncStart")},getMessage(){const{service:t}=this;if("initializing"===t.authState)return this.i18n("msgSyncInit");if("error"===t.authState)return this.i18n("msgSyncInitError");if("unauthorized"===t.authState)return this.i18n("msgSyncInitError");if("error"===t.syncState)return this.i18n("msgSyncError");if("ready"===t.syncState)return this.i18n("msgSyncReady");if("syncing"===t.syncState){let e="";return t.progress&&t.progress.total&&(e=` (${t.progress.finished}/${t.progress.total})`),this.i18n("msgSyncing")+e}if(t.lastSync){const e=new Date(t.lastSync).toLocaleString();return this.i18n("lastSync",e)}},getLabel(){const{service:t}=this;return"authorizing"===t.authState?this.i18n("labelSyncAuthorizing"):"authorized"===t.authState?this.i18n("labelSyncRevoke"):this.i18n("labelSyncAuthorize")}}},Xt=(s(123),Object(g.a)(Yt,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelSync"))}}),t.state?s("div",[s("span",{domProps:{textContent:t._s(t.i18n("labelSyncService"))}}),s("select",{staticClass:"mx-1",domProps:{value:t.syncConfig.current},on:{change:t.onSyncChange}},t._l(t.syncServices,e=>s("option",{key:e.name,domProps:{value:e.name,textContent:t._s(e.displayName)}})),0),t.service.name&&"oauth"===t.state.authType?s("button",{attrs:{disabled:!t.state.canAuthorize},domProps:{textContent:t._s(t.state.label)},on:{click:t.onAuthorize}}):t._e(),t.service.name?s("button",{attrs:{disabled:!t.state.canSync},on:{click:t.onSync}},[s("icon",{attrs:{name:"refresh"}})],1):t._e()]):t._e(),t.state?s("p",{staticClass:"mt-1",domProps:{textContent:t._s(t.state.message)}}):t._e(),t.state&&"password"===t.state.authType?s("fieldset",{staticClass:"mt-1"},[s("div",{staticClass:"sync-server-url"},[s("label",{domProps:{textContent:t._s(t.i18n("labelSyncServerUrl"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.serverUrl,expression:"state.userConfig.serverUrl"}],attrs:{type:"text",disabled:!t.state.canAuthorize||t.state.userConfig.anonymous},domProps:{value:t.state.userConfig.serverUrl},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"serverUrl",e.target.value)}}})]),s("div",{staticClass:"mt-1"},[s("div",{staticClass:"inline-block mr-2"},[s("label",{domProps:{textContent:t._s(t.i18n("labelSyncUsername"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.username,expression:"state.userConfig.username"}],attrs:{type:"text",disabled:!t.state.canAuthorize||t.state.userConfig.anonymous},domProps:{value:t.state.userConfig.username},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"username",e.target.value)}}})]),s("div",{staticClass:"inline-block mr-2"},[s("label",{domProps:{textContent:t._s(t.i18n("labelSyncPassword"))}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.password,expression:"state.userConfig.password"}],attrs:{type:"password",disabled:!t.state.canAuthorize||t.state.userConfig.anonymous},domProps:{value:t.state.userConfig.password},on:{input:e=>{e.target.composing||t.$set(t.state.userConfig,"password",e.target.value)}}})]),s("label",{staticClass:"mr-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.state.userConfig.anonymous,expression:"state.userConfig.anonymous"}],attrs:{type:"checkbox",disabled:!t.state.canAuthorize},domProps:{checked:Array.isArray(t.state.userConfig.anonymous)?t._i(t.state.userConfig.anonymous,null)>-1:t.state.userConfig.anonymous},on:{change:e=>{var s=t.state.userConfig.anonymous,n=e.target,a=!!n.checked;if(Array.isArray(s)){var o=t._i(s,null);n.checked?o<0&&t.$set(t.state.userConfig,"anonymous",s.concat([null])):o>-1&&t.$set(t.state.userConfig,"anonymous",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.state.userConfig,"anonymous",a)}}}),s("span",{domProps:{textContent:t._s(t.i18n("labelSyncAnonymous"))}})])]),s("div",{staticClass:"mt-1"},[s("button",{attrs:{disabled:!t.state.canAuthorize},domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:e=>(e.preventDefault(),t.onSaveUserConfig(e))}})])]):t._e(),s("div",{staticClass:"mt-1"},[s("label",[s("setting-check",{attrs:{name:"syncScriptStatus"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelSyncScriptStatus"))}})],1)])])}),[],!1,null,null,null).exports),Zt={props:{name:String,json:Boolean,disabled:Boolean,sync:{type:Boolean,default:!0}},data:()=>({value:null,jsonValue:null,error:null}),async created(){j.a.ready.indeed||await j.a.ready;const t=this.json?t=>JSON.stringify(t,null,"  "):t=>Array.isArray(t)?t.join("\n"):t||"";this.revoke=Object(U.a)(this.name,e=>{this.value=t(e)}),this.json&&this.$watch("value",this.parseJson)},beforeDestroy(){this.revoke()},methods:{parseJson(){try{this.jsonValue=JSON.parse(this.value),this.error=null}catch(t){this.error=t.message||t}},onChange(){if(this.error)return;const t=this.json?this.jsonValue:this.value;this.sync&&j.a.set(this.name,t),this.$emit("change",t)}}},Qt=Object(g.a)(Zt,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"monospace-font",class:{"has-error":t.error},attrs:{spellcheck:"false",disabled:t.disabled,title:t.error},domProps:{value:t.value},on:{change:t.onChange,input:e=>{e.target.composing||(t.value=e.target.value)}}})}),[],!1,null,null,null).exports,te=s(19),ee={data:()=>({hint:null}),components:{SettingText:Qt},mounted(){this.$refs.editor.$el.addEventListener("dblclick",this.toggleBoolean)},methods:{onSave(){const{jsonValue:t,error:e}=this.$refs.editor;e||j.a.set("editor",t),C({text:e||Object(a.n)("msgSavedEditorOptions")})},onReset(){j.a.set("editor",te.a.editor)},toggleBoolean(t){const e=t.target,s=e.value.slice(e.selectionStart,e.selectionEnd),n="false"===s?"true":"true"===s&&"false";n&&document.execCommand("insertText",!1,n)},async toggleStateHint(){if(this.hint)return void(this.hint=null);const t=["mode","value","configureMouse","lineNumberFormatter","specialCharPlaceholder"],e={};Object.entries(d()({},(await Promise.resolve().then(s.t.bind(null,9,7))).defaults,{},(await Promise.resolve().then(s.bind(null,43))).cmOptions,{},j.a.get("editor"))).sort(([t],[e])=>t<e?-1:t>e).filter(([e,s])=>!t.includes(e)&&"function"!=typeof s).forEach(([t,s])=>{e[t]=s}),this.hint=JSON.stringify(e,null,"  "),setTimeout(()=>{this.$el.getBoundingClientRect().bottom>window.innerHeight&&this.$el.scrollIntoView({behavior:"smooth"})})}}},se=(s(124),Object(g.a)(ee,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelEditor"))}}),s("p",{domProps:{innerHTML:t._s(t.i18n("descEditorOptions"))}}),s("setting-text",{ref:"editor",attrs:{name:"editor",json:!0}}),s("button",{domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:t.onSave}}),s("button",{domProps:{textContent:t._s(t.i18n("buttonReset"))},on:{click:t.onReset}}),s("button",{domProps:{textContent:t._s(t.i18n("buttonShowEditorState"))},on:{click:t.toggleStateHint}}),s("pre",{staticClass:"monospace-font dim-hint",domProps:{textContent:t._s(t.hint)}})],1)}),[],!1,null,null,null).exports),ne={components:{SettingText:Qt},methods:{onSave(){this.setTemplate(this.$refs.template.value)},onReset(){this.setTemplate("")},setTemplate(t){j.a.set("scriptTemplate",t),C({text:Object(a.n)("msgSavedScriptTemplate")})}}},ae=Object(g.a)(ne,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelScriptTemplate"))}}),s("setting-text",{ref:"template",attrs:{name:"scriptTemplate"}}),s("button",{domProps:{textContent:t._s(t.i18n("buttonSave"))},on:{click:t.onSave}}),s("button",{domProps:{textContent:t._s(t.i18n("buttonReset"))},on:{click:t.onReset}})],1)}),[],!1,null,null,null).exports,oe={components:{SettingText:Qt},methods:{onSave(){j.a.set("blacklist",this.$refs.blacklist.value),C({text:Object(a.n)("msgSavedBlacklist")}),Object(a.w)("BlacklistReset")}}},ie=Object(g.a)(oe,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelBlacklist"))}}),s("p",[t._v(" "+t._s(t.i18n("descBlacklist"))+" "),s("a",{attrs:{href:"https://violentmonkey.github.io/posts/smart-rules-for-blacklist/#blacklist-patterns",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("learnBlacklist"))}})]),s("setting-text",{ref:"blacklist",attrs:{name:"blacklist"}}),s("button",{domProps:{textContent:t._s(t.i18n("buttonSaveBlacklist"))},on:{click:t.onSave}})],1)}),[],!1,null,null,null).exports,re={components:{SettingText:Qt},methods:{onSave(){j.a.set("customCSS",this.$refs.css.value),C({text:Object(a.n)("msgSavedCustomCSS")})}}},le=Object(g.a)(re,(function(){var t=this.$createElement,e=this._self._c||t;return e("section",[e("h3",{domProps:{textContent:this._s(this.i18n("labelCustomCSS"))}}),e("p",{domProps:{innerHTML:this._s(this.i18n("descCustomCSS"))}}),e("setting-text",{ref:"css",attrs:{name:"customCSS"}}),e("button",{domProps:{textContent:this._s(this.i18n("buttonSaveCustomCSS"))},on:{click:this.onSave}})],1)}),[],!1,null,null,null).exports;const ce=[Tt.d,Tt.f,Tt.e],de=[{name:"showBadge",normalize:t=>t?"total"===t?"total":"unique":""},{name:"autoUpdate",normalize:t=>Math.max(0,Math.min(365,+t||0))},{name:"defaultInjectInto",normalize:t=>ce.includes(t)?t:"auto"},{name:"filtersPopup.sort",normalize:t=>"exec"===t&&t||"alpha"}],ue={};de.forEach(({name:t})=>{ue[t]=null});var pe={components:{Icon:y.a,VmImport:Kt,VmExport:qt,VmSync:Xt,VmEditor:se,VmTemplate:ae,VmBlacklist:ie,VmCss:le,SettingCheck:$.a,LocaleGroup:E},data:()=>({showAdvanced:!1,settings:ue,injectIntoOptions:ce}),methods:{getUpdater:({name:t,normalize:e})=>(s,n)=>{(s=e(s))!==(n=e(n))&&j.a.set(t,s)}},async created(){this.revokers=[],j.a.ready.indeed||await j.a.ready,de.forEach(t=>{const{name:e,normalize:s}=t;this.revokers.push(Object(U.a)(e,t=>{ue[e]=s(t)})),this.$watch(()=>ue[e],Object(a.d)(this.getUpdater(t),300))})},beforeDestroy(){this.revokers.forEach(t=>{t()})}},me=(s(125),Object(g.a)(pe,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-settings"},[s("h1",{domProps:{textContent:t._s(t.i18n("labelSettings"))}}),s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelGeneral"))}}),s("div",{staticClass:"mb-1"},[s("label",[s("setting-check",{attrs:{name:"autoReload"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelAutoReloadCurrentTab"))}})],1)]),s("div",{staticClass:"mb-1"},[s("label",[s("setting-check",{attrs:{name:"notifyUpdates"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelNotifyUpdates"))}})],1),s("label",{staticClass:"ml-2"},[s("setting-check",{attrs:{name:"notifyUpdatesGlobal"}}),s("span",{domProps:{textContent:t._s(t.i18n("labelNotifyUpdatesGlobal"))}})],1)]),s("div",{staticClass:"mb-1"},[s("label",[s("locale-group",{attrs:{"i18n-key":"labelAutoUpdate"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.autoUpdate,expression:"settings.autoUpdate"}],attrs:{type:"number",min:"0",max:"365",step:"1"},domProps:{value:t.settings.autoUpdate},on:{input:e=>{e.target.composing||t.$set(t.settings,"autoUpdate",e.target.value)}}})])],1)]),s("div",{staticClass:"mb-1"},[s("label",[s("span",{domProps:{textContent:t._s(t.i18n("labelBadge"))}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.showBadge,expression:"settings.showBadge"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,"showBadge",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""},domProps:{textContent:t._s(t.i18n("labelBadgeNone"))}}),s("option",{attrs:{value:"unique"},domProps:{textContent:t._s(t.i18n("labelBadgeUnique"))}}),s("option",{attrs:{value:"total"},domProps:{textContent:t._s(t.i18n("labelBadgeTotal"))}})])])]),s("div",{staticClass:"mb-1"},[s("label",[s("locale-group",{attrs:{"i18n-key":"labelPopupSort"}},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.settings["filtersPopup.sort"],expression:"settings['filtersPopup.sort']"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,"filtersPopup.sort",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"exec"},domProps:{textContent:t._s(t.i18n("filterExecutionOrder"))}}),s("option",{attrs:{value:"alpha"},domProps:{textContent:t._s(t.i18n("filterAlphabeticalOrder"))}})])])],1),s("label",{staticClass:"ml-2"},[s("setting-check",{attrs:{name:"filtersPopup.enabledFirst"}}),s("span",{domProps:{textContent:t._s(t.i18n("optionPopupEnabledFirst"))}})],1),s("label",{staticClass:"ml-2"},[s("setting-check",{attrs:{name:"filtersPopup.hideDisabled"}}),s("span",{domProps:{textContent:t._s(t.i18n("optionPopupHideDisabled"))}})],1)])]),s("vm-import"),s("vm-export"),s("vm-sync"),s("div",{staticClass:"show-advanced"},[s("button",{on:{click:e=>{t.showAdvanced=!t.showAdvanced}}},[s("span",{domProps:{textContent:t._s(t.i18n("labelAdvanced"))}}),s("icon",{class:{rotate:t.showAdvanced},attrs:{name:"arrow"}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showAdvanced,expression:"showAdvanced"}]},[s("section",[s("h3",{domProps:{textContent:t._s(t.i18n("labelGeneral"))}}),s("div",{staticClass:"mb-1"},[s("label",[s("span",{domProps:{textContent:t._s(t.i18n("labelInjectionMode"))}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.settings.defaultInjectInto,expression:"settings.defaultInjectInto"}],on:{change:e=>{var s=Array.prototype.filter.call(e.target.options,t=>t.selected).map(t=>"_value"in t?t._value:t.value);t.$set(t.settings,"defaultInjectInto",e.target.multiple?s:s[0])}}},t._l(t.injectIntoOptions,e=>s("option",{key:e,domProps:{value:e,textContent:t._s(e)}})),0),s("a",{staticClass:"ml-1",attrs:{href:"https://violentmonkey.github.io/posts/inject-into-context/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("learnInjectionMode"))}})])])]),s("vm-editor"),s("vm-template"),s("vm-blacklist"),s("vm-css")],1)],1)}),[],!1,null,null,null).exports);const he={version:browser.runtime.getManifest().version,language:browser.i18n.getUILanguage()};var ve={data:()=>he};s(126);const ge={scripts:Dt,settings:me,about:Object(g.a)(ve,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-about"},[s("h1",[s("span",{staticClass:"mr-1",domProps:{textContent:t._s(t.i18n("labelAbout"))}}),s("small",{domProps:{textContent:t._s("v"+t.version)}})]),s("p",{staticClass:"mb-2",domProps:{textContent:t._s(t.i18n("extDescription"))}}),s("div",{staticClass:"mb-2"},[s("a",{attrs:{href:"https://violentmonkey.github.io/donate/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelDonate"))}}),s("span",{staticClass:"text-red"},[t._v(" \u2665")])]),s("div",{staticClass:"mb-1"},[s("label",{domProps:{textContent:t._s(t.i18n("labelRelated"))}}),s("ul",[s("li",[s("a",{attrs:{href:"https://violentmonkey.github.io",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelHomepage"))}})]),s("li",[s("a",{attrs:{href:"https://github.com/violentmonkey/violentmonkey/issues",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelFeedback"))}})]),s("li",[s("a",{attrs:{href:"https://github.com/violentmonkey/violentmonkey/graphs/contributors",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelContributors"))}})])])]),s("div",{staticClass:"mb-1"},[s("label",{domProps:{textContent:t._s(t.i18n("labelCurrentLang"))}}),s("span",{staticClass:"current",domProps:{textContent:t._s(t.language)}}),t._v(" | "),s("a",{attrs:{href:"https://violentmonkey.github.io/localization/",target:"_blank",rel:"noopener noreferrer"},domProps:{textContent:t._s(t.i18n("labelHelpTranslate"))}})])])}),[],!1,null,null,null).exports},fe=Object(a.n)("extName");var be={components:{Icon:y.a},data(){const[t,e]=b.route.paths;return{aside:!1,canRenderAside:"scripts"!==t||"_new"!==e&&!Number(e),store:b}},computed:{tab(){let t=this.store.route.paths[0];return ge[t]||(t="scripts"),t},tabComponent(){return ge[this.tab]}},watch:{"store.title"(t){document.title=t?`${t} - ${fe}`:fe},"store.route.paths"(){w(),this.canRenderAside=!0}}},Ce=(s(127),Object(g.a)(be,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-options flex h-100"},[t.canRenderAside?s("aside",{class:{"show-aside":t.aside}},[t.aside?s("div",{staticClass:"aside-backdrop visible-sm",on:{click:e=>{t.aside=!1}}}):t._e(),s("div",{staticClass:"aside-content"},[s("img",{attrs:{src:"/public/images/icon128.png"}}),s("h1",{domProps:{textContent:t._s(t.i18n("extName"))}}),s("div",{staticClass:"aside-menu"},[s("a",{class:{active:"scripts"===t.tab},attrs:{href:"#scripts"},domProps:{textContent:t._s(t.i18n("sideMenuInstalled"))}}),s("a",{class:{active:"settings"===t.tab},attrs:{href:"#settings"},domProps:{textContent:t._s(t.i18n("sideMenuSettings"))}}),s("a",{class:{active:"about"===t.tab},attrs:{href:"#about"},domProps:{textContent:t._s(t.i18n("sideMenuAbout"))}})]),s("div",{staticClass:"aside-toggle-wrapper visible-sm",on:{click:e=>{t.aside=!t.aside}}},[s("div",{staticClass:"aside-toggle"},[s("icon",{attrs:{name:"arrow"}})],1)])])]):t._e(),s(t.tabComponent,{tag:"component",staticClass:"tab flex-auto"})],1)}),[],!1,null,null,null).exports);function xe(t){const e=t.meta||{},s=Object(a.k)(e,"name"),n=[e.name,s,e.description,Object(a.k)(e,"description"),t.custom.name,t.custom.description].filter(Boolean).join("\n"),o=t.custom.name||s,i=o.toLowerCase();t.$cache={search:n,name:o,lowerName:i}}function ye(){Object(a.w)("GetData",null,{retry:!0}).then(t=>{const e=b.cache||{};var s;b.cache=t.cache,b.sync=t.sync,b.scripts=t.scripts,b.scripts&&b.scripts.forEach(xe),b.cache&&(s=b.cache,o.a).call(s,([t,s])=>{e[t]?(b.cache[t]=e[t],delete e[t]):b.cache[t]=Object(a.b)(s,{defaultType:"image/png"})}),o.c.call(e,URL.revokeObjectURL),b.loading=!1})}n.default.prototype.i18n=a.n,Object.assign(b,{loading:!1,cache:{},scripts:[],sync:[],title:null}),(()=>{b.loading=!0,ye(),Object.assign(i.a,{ScriptsUpdated(){ye()},UpdateSync(t){b.sync=t},AddScript({update:t}){t.message="",xe(t),b.scripts.push(t)},UpdateScript(t){if(!t)return;const e=b.scripts.findIndex(e=>e.props.id===t.where.id);if(e>=0){const s=Object.assign({},b.scripts[e],t.update);n.default.set(b.scripts,e,s),xe(s)}},RemoveScript(t){const e=b.scripts.findIndex(e=>e.props.id===t);e>=0&&b.scripts.splice(e,1)}});const t=new n.default({render:t=>t(Ce)}).$mount();document.body.append(t.$el),l().then(t=>{b.zip=t,t.workerScriptsPath="/public/lib/zip.js/"})})()},22:(t,e,s)=>{},23:(t,e,s)=>{},26:(t,e,s)=>{},27:(t,e,s)=>{},28:(t,e,s)=>{},29:(t,e,s)=>{},30:(t,e,s)=>{},31:(t,e,s)=>{},32:(t,e,s)=>{},33:(t,e,s)=>{},34:(t,e,s)=>{},35:(t,e,s)=>{},36:(t,e,s)=>{},37:(t,e,s)=>{},73:(t,e,s)=>{},74:(t,e,s)=>{"use strict";var n=s(22);s.n(n).a},98:(t,e,s)=>{"use strict";var n=s(23);s.n(n).a}});